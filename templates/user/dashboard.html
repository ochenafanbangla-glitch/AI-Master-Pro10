<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI MASTER PRO (V.10)</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="dashboard-container">
        <header>
            <h1 class="app-title">AI MASTER PRO</h1>
            <span class="version-badge">V.10 PRO MODE (‡¶∏‡ßá‡¶®‡ßç‡¶∏‡¶∞ ‡¶Ü‡¶™‡¶ó‡ßç‡¶∞‡ßá‡¶°)</span>
        </header>

        <!-- Trust & Performance Section -->
        <div class="glass-card trust-card">
            <div class="trust-header">
                <span class="section-title">‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡¶∞‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø‡¶§‡¶æ</span>
                <span class="accuracy-badge">‡¶≤‡¶æ‡¶á‡¶≠ ‡¶è‡¶ï‡ßÅ‡¶∞‡ßá‡¶∏‡¶ø: <span id="live-accuracy">{{ accuracy }}%</span></span>
            </div>
            <div class="manager-status-grid">
                <div class="manager-status-item">
                    <span class="manager-name">CID ‡¶∏‡ßá‡¶®‡ßç‡¶∏‡¶∞</span>
                    <span id="cid-status" class="status-indicator status-active">‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶®</span>
                </div>
                <div class="manager-status-item">
                    <span class="manager-name">‡¶∞‡¶ø‡¶∏‡ßç‡¶ï ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶æ‡¶∞</span>
                    <span id="risk-status" class="status-indicator status-active">‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡ßü</span>
                </div>
                <div class="manager-status-item">
                    <span class="manager-name">‡¶™‡ßç‡¶∞‡ßã‡¶¨‡¶æ‡¶¨‡¶ø‡¶≤‡¶ø‡¶ü‡¶ø ‡¶∏‡ßá‡¶®‡ßç‡¶∏‡¶∞</span>
                    <span id="probability-status" class="status-indicator status-active">‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡ßü</span>
                </div>
            </div>
            <div id="cid-alert-box" class="cid-alert-box" style="display: none;">
                <div class="cid-alert-header">‚ö†Ô∏è CID ‡¶∏‡ßá‡¶®‡ßç‡¶∏‡¶∞ ‡¶π‡¶∏‡ßç‡¶§‡¶ï‡ßç‡¶∑‡ßá‡¶™</div>
                <div id="cid-alert-msg" class="cid-alert-body">‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ: ‡¶≠‡ßÅ‡¶≤ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶∂‡¶®‡¶æ‡¶ï‡ßç‡¶§ ‡¶π‡ßü‡ßá‡¶õ‡ßá! ‡¶∏‡¶ø‡¶ó‡¶®‡ßç‡¶Ø‡¶æ‡¶≤ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§</div>
            </div>
            <div id="dragon-alert-box" class="dragon-alert-box" style="display: none;">
                <div class="dragon-alert-header">üêâ ‡¶°‡ßç‡¶∞‡¶æ‡¶ó‡¶® ‡¶¨‡ßç‡¶∞‡ßá‡¶ï‡¶Ü‡¶â‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡ßç‡¶ü</div>
                <div id="dragon-alert-msg" class="dragon-alert-body">‡¶°‡ßç‡¶∞‡¶æ‡¶ó‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶∂‡¶®‡¶æ‡¶ï‡ßç‡¶§ ‡¶π‡ßü‡ßá‡¶õ‡ßá! ‡¶¨‡ßç‡¶∞‡ßá‡¶ï‡¶Ü‡¶â‡¶ü ‡¶™‡¶∞‡ßç‡¶Ø‡¶¨‡ßá‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§</div>
            </div>
        </div>

        <!-- AI Learning Progress Section -->
        <div class="glass-card learning-card">
            <div class="learning-header">
                <span class="section-title">AI ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü‡ßç‡¶∞‡¶ø‡¶ï‡ßç‡¶∏</span>
                <span class="learning-stats">{{ total_collected }} ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá</span>
            </div>
            <div class="progress-container">
                <div class="progress-bar-bg">
                    <div class="progress-bar-fill" style="width: {{ learning_percent }}%;"></div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                    <span class="progress-text" style="text-align: left;">PEM ‡¶≤‡¶æ‡¶∞‡ßç‡¶®‡¶ø‡¶Ç (‡¶Æ‡¶ø‡¶®‡¶ø‡¶Æ‡¶æ‡¶Æ: ‡ß®‡ß¶)</span>
                    <span class="progress-text">{{ learning_percent }}% ‡¶Ö‡¶™‡ßç‡¶ü‡¶ø‡¶Æ‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶®</span>
                </div>
            </div>
        </div>

        <!-- Signal Section -->
        <div class="glass-card">
            <div style="display: flex; justify-content: space-between;">
                <span class="section-title">‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡ßá‡¶ü ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£</span>
                <span id="current-pattern-badge" class="pattern-badge">‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶®: ---</span>
            </div>
            <div class="prediction-box">
                <div id="prediction-display" class="prediction-value">{% if total_collected < target_trades %}‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®{% else %}---{% endif %}</div>
                <div class="confidence-container">
                    <div class="confidence-label">
                        <span>‡¶ï‡¶®‡¶´‡¶ø‡¶°‡ßá‡¶®‡ßç‡¶∏</span>
                        <span id="confidence-text">0%</span>
                    </div>
                    <div class="confidence-bar-bg">
                        <div id="confidence-bar" class="confidence-bar-fill"></div>
                    </div>
                </div>
                <div class="confidence-label" style="margin-top: 10px;">
                    <span>‡¶∏‡¶Æ‡ßç‡¶≠‡¶æ‡¶¨‡¶®‡¶æ (Probability)</span>
                    <span id="probability-text">0%</span>
                </div>
                <p style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 10px;">‡¶â‡ßé‡¶∏: <span id="source-text">{% if total_collected < target_trades %}‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡ßü{% else %}‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®...{% endif %}</span></p>
            </div>
            <button id="get-signal-btn" class="btn-primary">‡¶∏‡¶ø‡¶ó‡¶®‡ßç‡¶Ø‡¶æ‡¶≤ ‡¶®‡¶ø‡¶®</button>
        </div>

        <!-- Result Input Section -->
        <div class="glass-card">
            <span class="section-title">‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡ßá‡¶ü ‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</span>
            <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 15px;">
                AI ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü‡ßç‡¶∞‡¶ø‡¶ï‡ßç‡¶∏ ‡¶™‡ßç‡¶∞‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶£‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶†‡¶ø‡¶ï ‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü‡¶ü‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:
            </p>
            <div class="btn-group">
                <button onclick="submitResult('BIG')" class="btn-result btn-big" {% if total_collected >= target_trades %}disabled{% endif %}>‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡ßá‡¶ü BIG</button>
                <button onclick="submitResult('SMALL')" class="btn-result btn-small" {% if total_collected >= target_trades %}disabled{% endif %}>‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡ßá‡¶ü SMALL</button>
            </div>
        </div>

        <!-- History Section -->
        <div class="glass-card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <span class="section-title" style="margin-bottom: 0;">‡¶ü‡ßç‡¶∞‡ßá‡¶° ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø</span>
                <span style="font-size: 0.7rem; color: var(--text-secondary);">‡¶∏‡¶æ‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï ‡ßß‡ß¶‡¶ü‡¶ø</span>
            </div>
            
            <div id="history-list" class="history-list">
                {% if not trades %}
                <p style="text-align: center; color: var(--text-secondary); font-size: 0.9rem; padding: 20px;">‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶ü‡ßç‡¶∞‡ßá‡¶° ‡¶®‡ßá‡¶á‡•§ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶ø‡¶ó‡¶®‡ßç‡¶Ø‡¶æ‡¶≤ ‡¶®‡¶ø‡¶®!</p>
                {% endif %}
                
                {% for trade in trades %}
                <div class="history-item">
                    <div class="item-info">
                        <span class="item-main">{{ 'BIG' if trade.ai_prediction == 'BIG' else 'SMALL' if trade.ai_prediction == 'SMALL' else trade.ai_prediction }} ‚Üí {{ 'BIG' if trade.actual_result == 'BIG' else 'SMALL' if trade.actual_result == 'SMALL' else '???' }}</span>
                        <span class="item-sub">{{ trade.timestamp.split(' ')[1] if ' ' in trade.timestamp else trade.timestamp }} | ‡¶ï‡¶®‡¶´‡¶ø‡¶°‡ßá‡¶®‡ßç‡¶∏: {{ trade.ai_confidence }}%</span>
                    </div>
                    <div style="display: flex; align-items: center;">
                        {% if trade.ai_prediction != 'INITIAL' %}
                        <span class="item-status {{ 'status-win' if trade.actual_result == trade.ai_prediction else 'status-loss' }}">
                            {{ '‡¶ú‡ßü' if trade.actual_result == trade.ai_prediction else '‡¶π‡¶æ‡¶∞' }}
                        </span>
                        {% else %}
                        <span class="item-status" style="background: #555;">‡¶°‡ßá‡¶ü‡¶æ</span>
                        {% endif %}
                        <button onclick="undoTrade('{{ trade.trade_id }}')" class="undo-btn">‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®</button>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="action-footer" style="display: flex; flex-direction: column; gap: 10px;">
            <button onclick="downloadCVC()" class="btn-primary" style="background: var(--accent-purple);">CVC ‡¶°‡ßá‡¶ü‡¶æ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶∏‡ßá‡¶∂‡¶®)</button>
            <button onclick="startNewSession()" class="btn-new-session">‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡ßá‡¶∂‡¶® ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶Ü‡¶∞‡ßç‡¶ï‡¶æ‡¶á‡¶≠ ‡¶°‡ßá‡¶ü‡¶æ)</button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>
